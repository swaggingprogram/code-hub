<%= render "shared/header" %>
<div class="show-wrapper">
  <div class="show-code">
    <div class= "show-header">
      <h1 class= "show-head-text">
        Your Code
      </h1>
    </div>
    <div class="code-show">
      <%= markdown(@code.codetext).html_safe %>
    </div>
    <div class= "show-settings">
      <div class="show-buttons">
        <% if user_signed_in? && @code.user.id == current_user.id %>
        <%= link_to(edit_code_path(@code), class: "edit-btn") do %>
        <div class ="btn">
          編集
        </div>
        <% end %>
        <%= link_to(code_path(@code), method: :delete, class: "delete-btn") do %>
        <div class ="btn">
          削除
        </div>
        <% end %>
        <% end %>
        <%= link_to(root_path, class: "show-return") do %>
        <div class ="btn">
          戻る
        </div>
        <% end %>
        <div class ="btn">
        </div>
        <div class ="btn">
        </div>
      </div>
    </div>
    <div class= "show-info">
       <div class="info-show">
          <%= @code.user.nickname %>
      </div>
      <div class="info-show">
          <%= @code.category.name %>
      </div>
      <div class="info-show-kana">
          <%= @code.genre.name %>
      </div>
    </div>  
  </div>
  <div class="show-comment">
   <div class="comment-area">
     <% @comments.each do |comment| %>
     <div class="comments-wrap">
       <div class="comments-name">
         <%= comment.user.nickname %>
       </div>
        <div class="comments-content">
          <%= markdown(comment.concept).html_safe %>
        </div>
      </div>
      <% end %>
   </div>
   <div class="comment-form">
    <% if user_signed_in? %>
      <%= form_with(model: [@code, @comment], local: true) do |f| %>
        <div class="show-field">
          <%= f.text_area :concept, class: "comment-content", value: @template %>
          <div class="actions">
            <%= f.submit "送信する", class: "form-btn"  %>
          </div>
        </div>
      <% end %>
    <% end %>
    </div>
  </div>
</div>
<%= render "shared/footer" %>